<% self.page_title = 'Check your answers' %>

<div class="govuk-grid-row" id="application-preview">
  <%= form_for @privacy_policy, url: candidates_school_registrations_confirmation_email_path do |f| %>
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-l">Check your answers before requesting your school experience</h1>
    <p>A copy of the following details will be emailed to you once you've sent your school experience request.</p>
    <%= GovukElementsErrorsHelper.error_summary @privacy_policy, 'There is a problem', '' %>
    <dl class="govuk-summary-list">

      <h2 class="govuk-heading-m">Personal details</h2>

      <%= summary_row \
        'Full name',
        @application_preview.full_name,
        edit_candidates_school_registrations_contact_information_path(
          anchor: 'candidates_registrations_contact_information_full_name_container'
        ) %>

      <%= summary_row \
        'Address',
        @application_preview.full_address,
        edit_candidates_school_registrations_contact_information_path(
          anchor: 'candidates_registrations_contact_information_building_container'
        ) %>

      <%= summary_row \
        'UK telephone number',
        @application_preview.telephone_number,
        edit_candidates_school_registrations_contact_information_path(
          anchor: 'candidates_registrations_contact_information_phone_container'
        ) %>

      <%= summary_row \
        'Email address',
        @application_preview.email_address,
        edit_candidates_school_registrations_contact_information_path(
          anchor: 'candidates_registrations_contact_information_email_container'
        ) %>

      <h2 class="govuk-heading-m">Request details</h2>

      <%= summary_row \
        'School or college',
        @application_preview.school_name %>

      <%- if @application_preview.school.availability_preference_fixed? -%>

        <%= summary_row \
          'Placement date',
          @application_preview.placement_date,
          edit_candidates_school_registrations_placement_preference_path(
            anchor: 'candidates_registrations_placement_preference_availability_container'
          ) %>

      <%- else -%>

        <%= summary_row \
          'Experience availability',
          @application_preview.placement_availability,
          edit_candidates_school_registrations_placement_preference_path(
            anchor: 'candidates_registrations_placement_preference_availability_container'
          ) %>

      <%- end -%>

      <%= summary_row \
        'Experience outcome',
        @application_preview.placement_outcome,
        edit_candidates_school_registrations_placement_preference_path(
          anchor: 'candidates_registrations_placement_preference_objectives_container'
        ) %>

      <%= summary_row \
        'Degree stage',
        @application_preview.degree_stage,
        edit_candidates_school_registrations_subject_preference_path(
          anchor: 'candidates_registrations_subject_preference_degree_stage_container'
        ) %>

      <%= summary_row \
        'Degree subject',
        @application_preview.degree_subject,
        edit_candidates_school_registrations_subject_preference_path(
          anchor: 'candidates_registrations_subject_preference_degree_stage_container'
        ) %>

      <%= summary_row \
        'Teaching stage',
        @application_preview.teaching_stage,
        edit_candidates_school_registrations_subject_preference_path(
          anchor: 'candidates_registrations_subject_preference_teaching_stage_container'
        ) %>

      <%= summary_row \
        'Teaching subject - first choice',
        @application_preview.teaching_subject_first_choice,
        edit_candidates_school_registrations_subject_preference_path(
          anchor: 'candidates_registrations_subject_preference_subject_first_choice_container'
        ) %>

      <%= summary_row \
        'Teaching subject - second choice',
        @application_preview.teaching_subject_second_choice,
        edit_candidates_school_registrations_subject_preference_path(
          anchor: 'candidates_registrations_subject_preference_subject_second_choice_container'
        ) %>

      <%= summary_row \
        'DBS certificate',
        @application_preview.dbs_check_document,
        edit_candidates_school_registrations_background_check_path(
          anchor: 'candidates_registrations_background_check_has_dbs_check_container'
        ) %>

    </dl>
  </div>
  <div class="govuk-grid-column-full">
    <h2 class="govuk-heading-m">Send your school experience request</h2>
      <div class="govuk-form-group" id="<%= f.form_group_id(:acceptance) %>">
        <%= f.check_box_input :acceptance %>
      </div>
      <%= f.submit 'Accept and send', class: 'govuk-button' %>
  </div>
  <% end %>
</div>
